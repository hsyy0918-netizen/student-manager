<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <title>待办审核</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui@2.8.18/dist/css/layui.css"/>
    <link rel="stylesheet" href="./css/style.css"/>
</head>
<body>
<div class="page-wrap">
    <div class="page-header">
        <h2>待办审核</h2>
    </div>

    <table id="tableAudit" lay-filter="tableAudit"></table>
</div>

<script src="https://cdn.jsdelivr.net/npm/layui@2.8.18/dist/layui.js"></script>
<script src="./js/mock-data.js"></script>
<script src="./js/common.js"></script>
<script>
    layui.use(['table','layer'], function(){
        const table=layui.table, layer=layui.layer;

        table.render({
            elem:'#tableAudit',
            height: 'full-200',
            data: MOCK_PURCHASES.filter(p=> p.status==='submitted' || p.status==='dept_approving' || p.status==='company_approving'),
            cols:[[
                {field:'applyNo', title:'申请编号', width:180},
                {field:'deptName', title:'部门', width:120},
                {field:'applicant', title:'申请人', width:100},
                {field:'projectName', title:'项目', minWidth:180},
                {field:'sumAmount', title:'金额', width:120, templet:d=>common.fmtCurrency(d.sumAmount)},
                {field:'statusText', title:'当前节点', width:120},
                {title:'操作', width:260, templet: d=> `
        <div class="op-btns">
          <button class="layui-btn layui-btn-xs" onclick="common.approve('${d.id}')">通过</button>
          <button class="layui-btn layui-btn-danger layui-btn-xs" onclick="common.reject('${d.id}')">驳回</button>
          <a class="layui-btn layui-btn-primary layui-btn-xs" href="./purchase_form.html?id=${d.id}">查看</a>
        </div>
      `}
            ]]
        });
    });
</script>
</body>
</html>
